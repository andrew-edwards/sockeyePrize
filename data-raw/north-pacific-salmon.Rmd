---
title: "Wrangling North Pacific Salmon data"
author: "Andrew Edwards and Carrie Holt"
output: pdf_document
fontsize: 12pt
date: "Last compiled on `r format(Sys.time(), '%d %B, %Y')`"
---

```{r, setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "",
  cache = FALSE,
  # cache_path = "data-2025-cache/",
  # fig.path = "data-2025-figs-cache/",
  fig.width = 7,
  fig.height = 6
)
  # comment = "#>",
```

```{r, build, echo = FALSE, eval = FALSE}
# To build either run this line or click knit button in RStudio:
rmarkdown::render("north-pacific-salmon.Rmd")
```

```{r, packages, echo = FALSE}
library(dplyr)
load_all()
```

From Brendan (30/4/25 email to Carrie):

"The attached are the most up to date data and best citation would be: Connors, B., Ruggerone, G.T. and Irvine, J.R., 2025. Adapting management of Pacific salmon to a warming and more crowded ocean. ICES Journal of Marine Science, 82(1), p.fsae135."

From the spreadsheet:

"data through 2015 taken from Ruggerone, G.T. and Irvine, J.R., 2018. Numbers
and biomass of natural and hatchery origin pink salmon, chum salmon, and sockeye
salmon in the North Pacific Ocean, 1925-2015. Marine and Coastal Fisheries,
10(2), pp.152-168. "

2016-2023 updated using same methods.

2024: crude estimate of pinks; 5 year average for chum and sockeye (presumably
would want to update for a formal paper, this is fine for our purposes).

# Data loading


```{r, datapreparation}
data_dir <- paste0(here::here(),
                   "/data-raw/")

total_raw <- read.csv(paste0(data_dir,
                                 "total_np_salmon.2024_update.csv")) %>%
  tibble::as_tibble()

np_salmon <- mutate(total_raw,
                    return_year_of_np_salmon = Return.Year,
                    pink = Pink,
                    chum = Chum,
                    sockeye = Sockeye,
                    total = Total) %>%
  select(return_year_of_np_salmon,
         pink,
         chum,
         sockeye,
         total)

np_salmon

tail(np_salmon)

summary(np_salmon)
```

Save data in package:
```{r, savedata}
usethis::use_data(np_salmon,
                  overwrite = TRUE)
```
